# M1.5 - Minimal Web Interface

## Task Description

**What**: Browser-based UI showing conversation status and providing voice interaction.

**Why**:
- Users need visual feedback (is it listening? thinking? speaking?)
- Web-based means accessible from any device with a browser
- No app installation required

## TDD Requirements

### Test File: `tests/test_frontend.py` (Playwright)

Write these tests FIRST (based on Playwright Python docs):
Run with: pytest tests/test_frontend.py --browser chromium

```python
import pytest
from playwright.sync_api import Page, expect

@pytest.fixture(scope="session")
def browser_context_args():
    return {"permissions": ["microphone"]}

def test_homepage_loads(page: Page):
    """Homepage loads without errors."""
    page.goto("http://localhost:5173")
    expect(page).to_have_title("JARVIS")

def test_status_indicator_visible(page: Page):
    """Status indicator shows current state."""
    page.goto("http://localhost:5173")
    status = page.locator("[data-testid='status-indicator']")
    expect(status).to_be_visible()
    expect(status).to_have_text("Ready")

def test_microphone_button_exists(page: Page):
    """Microphone button for voice activation."""
    page.goto("http://localhost:5173")
    mic_button = page.locator("[data-testid='mic-button']")
    expect(mic_button).to_be_visible()
    expect(mic_button).to_be_enabled()

def test_websocket_connection_status(page: Page):
    """Shows WebSocket connection status."""
    page.goto("http://localhost:5173")
    # Wait for WebSocket to connect
    page.wait_for_timeout(2000)

    connection_status = page.locator("[data-testid='connection-status']")
    expect(connection_status).to_have_text("Connected")

def test_status_changes_on_speaking(page: Page):
    """Status updates when voice activity detected."""
    page.goto("http://localhost:5173")

    # Click mic button to start
    page.click("[data-testid='mic-button']")

    # Status should change from Ready
    status = page.locator("[data-testid='status-indicator']")
    expect(status).not_to_have_text("Ready")
```

## Verification Command

```bash
cd frontend && npm run build && npm run preview &
pytest tests/test_frontend.py --browser chromium -v
```

## Completion Promise

Only output this when ALL tests pass:

```
<promise>M1.5 COMPLETE</promise>
```

## Dependencies

- M1.2 (WebSocket Backend)

## Files to Create/Modify

- `frontend/src/App.tsx` or `frontend/src/App.jsx`
- `frontend/src/components/StatusIndicator.tsx`
- `frontend/src/components/MicButton.tsx`
- `frontend/src/hooks/useWebSocket.ts`
- `tests/test_frontend.py`
